# ============================================================================
# SCT Chatbot Microservice - Environment Configuration Template
# ============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env file to version control!
# ============================================================================

# ============================================================================
# Azure AD Configuration
# ============================================================================
# Get these values from Azure Portal > Azure Active Directory > App Registrations
AZURE_TENANT_ID=your-tenant-id-here
AZURE_CLIENT_ID=your-client-id-here
AZURE_CLIENT_SECRET=your-client-secret-here

# ============================================================================
# Azure OpenAI Configuration
# ============================================================================
# Get these from Azure Portal > Azure OpenAI Service
AZURE_OPENAI_ENDPOINT=https://your-openai-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your-openai-api-key-here
AZURE_OPENAI_DEPLOYMENT=gpt-4o
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# Model Configuration
AZURE_OPENAI_TEMPERATURE=0.7
AZURE_OPENAI_MAX_TOKENS=2000
AZURE_OPENAI_TOP_P=0.95
AZURE_OPENAI_FREQUENCY_PENALTY=0.0
AZURE_OPENAI_PRESENCE_PENALTY=0.0

# ============================================================================
# Microsoft Sentinel Configuration
# ============================================================================
# Get workspace ID from Azure Portal > Log Analytics Workspace
AZURE_WORKSPACE_ID=your-workspace-id-here
AZURE_LOG_ANALYTICS_ENDPOINT=https://api.loganalytics.io/v1

# ============================================================================
# Redis Configuration (for conversation context storage)
# ============================================================================
# Option 1: Azure Cache for Redis
REDIS_HOST=your-redis-cache.redis.cache.windows.net
REDIS_PORT=6380
REDIS_PASSWORD=your-redis-password-here
REDIS_SSL=true

# Option 2: Local Redis (for development)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=changeme
# REDIS_SSL=false

# Redis Database Configuration
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ============================================================================
# Cosmos DB Configuration (alternative to Redis for conversation history)
# ============================================================================
# Optional: Use Cosmos DB for persistent conversation history
# COSMOS_DB_ENDPOINT=https://your-cosmos-account.documents.azure.com:443/
# COSMOS_DB_KEY=your-cosmos-primary-key-here
# COSMOS_DB_DATABASE=chatbot
# COSMOS_DB_CONTAINER=conversations
# COSMOS_DB_PARTITION_KEY=/userId

# ============================================================================
# Application Configuration
# ============================================================================
APP_NAME=sct-chatbot-service
APP_VERSION=1.0.0
APP_DESCRIPTION="SCT Chatbot Microservice - AI-Powered Security Assistant"

# Environment: development, staging, production
ENVIRONMENT=development

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json

# API Configuration
API_V1_PREFIX=/api/v1
API_TITLE="SCT Chatbot API"
API_DOCS_URL=/docs
API_REDOC_URL=/redoc

# Server Configuration
HOST=0.0.0.0
PORT=8000
WORKERS=4
RELOAD=false

# ============================================================================
# CORS Configuration
# ============================================================================
# Comma-separated list of allowed origins
# Development: Include localhost
CORS_ORIGINS=["http://localhost:4200","http://localhost:8000","https://sct.azure.com"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET","POST","PUT","DELETE","OPTIONS"]
CORS_ALLOW_HEADERS=["*"]

# ============================================================================
# Security Configuration
# ============================================================================
# JWT Token Configuration
JWT_ALGORITHM=RS256
JWT_AUDIENCE=api://chatbot-service
JWT_ISSUER=https://login.microsoftonline.com/${AZURE_TENANT_ID}/v2.0
JWT_LEEWAY=10

# Required JWT Claims
JWT_REQUIRED_CLAIMS=["oid","preferred_username"]

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# API Key for service-to-service communication (optional)
# API_KEY=your-secure-api-key-here

# ============================================================================
# Conversation Configuration
# ============================================================================
# Conversation timeout in minutes
CONVERSATION_TIMEOUT_MINUTES=60

# Maximum number of messages in conversation history
MAX_CONVERSATION_HISTORY=100

# Maximum message length in characters
MAX_MESSAGE_LENGTH=2000

# Context window size for AI processing
CONTEXT_WINDOW_SIZE=10

# Enable conversation summarization
ENABLE_CONVERSATION_SUMMARY=true

# ============================================================================
# Feature Flags
# ============================================================================
# Enable/disable specific features
FEATURE_WEBSOCKET_ENABLED=true
FEATURE_TEAMS_ADAPTER_ENABLED=false
FEATURE_SLACK_ADAPTER_ENABLED=false
FEATURE_MULTI_LANGUAGE_ENABLED=false
FEATURE_VOICE_ENABLED=false

# ============================================================================
# Monitoring & Observability
# ============================================================================
# Application Insights (Azure Monitor)
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-instrumentation-key;IngestionEndpoint=https://your-region.in.applicationinsights.azure.com/;LiveEndpoint=https://your-region.livediagnostics.monitor.azure.com/

# Enable detailed tracing
ENABLE_TRACING=true
TRACE_LEVEL=INFO

# Metrics Configuration
METRICS_ENABLED=true
METRICS_PORT=9090

# ============================================================================
# Performance & Optimization
# ============================================================================
# Cache TTL in seconds
CACHE_TTL_SECONDS=3600

# Enable response caching
ENABLE_RESPONSE_CACHE=true

# Request timeout in seconds
REQUEST_TIMEOUT_SECONDS=30

# Max concurrent requests
MAX_CONCURRENT_REQUESTS=100

# Connection pool size
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ============================================================================
# Development & Debug
# ============================================================================
# Enable debug mode (DO NOT use in production!)
DEBUG=false

# Enable verbose logging
VERBOSE_LOGGING=false

# Mock external services for testing
MOCK_OPENAI=false
MOCK_SENTINEL=false
MOCK_REDIS=false

# Test mode
TEST_MODE=false

# ============================================================================
# Azure Key Vault Configuration (for production)
# ============================================================================
# Use Azure Key Vault to securely store secrets
# AZURE_KEY_VAULT_URL=https://your-keyvault.vault.azure.net/
# AZURE_KEY_VAULT_ENABLED=true

# Key Vault Secret Names (maps to actual secret names in Key Vault)
# KV_SECRET_AZURE_CLIENT_SECRET=azure-client-secret
# KV_SECRET_OPENAI_API_KEY=openai-api-key
# KV_SECRET_REDIS_PASSWORD=redis-password
# KV_SECRET_COSMOS_DB_KEY=cosmos-db-key

# ============================================================================
# Health Check Configuration
# ============================================================================
HEALTH_CHECK_PATH=/api/v1/health
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_TIMEOUT_SECONDS=10

# ============================================================================
# Backup & Recovery
# ============================================================================
# Enable automatic backups of conversation data
ENABLE_BACKUP=false
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30

# ============================================================================
# Notifications
# ============================================================================
# Email notifications for errors (optional)
# SMTP_HOST=smtp.office365.com
# SMTP_PORT=587
# SMTP_USERNAME=notifications@example.com
# SMTP_PASSWORD=your-email-password
# SMTP_FROM=chatbot@sct.azure.com
# SMTP_TO=admin@sct.azure.com

# ============================================================================
# Custom Configuration
# ============================================================================
# Add any custom configuration variables here
